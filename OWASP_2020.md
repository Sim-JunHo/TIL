# **OWASP SEOUL CONFERENCE 2020**

## 2020-10-08

---

### 해킹대회 뒷이야기

#### 박세준 대표 (티오리)

박세준 :

- 티오리 CEO
- DEFCON 5회 우승
- 카네기 멜론 대학 컴공

사이버 보안이란

- 인터넷 상에서 개인적인 정보의 유출 등 부터 국가 안보에서도 큰 위협으로 다가오고 있다.
- 회사에서도 기밀 자료 보호 및 고객 서비스 보호를 하고 있다.
- 기능적인 부분 뿐만 아니라 보안상의 요소도 검증을 하고 서비스를 하자.

OFFENSIVE SEC.

- 공격자의 입장에서 서비스에 검증을 통해 보안성을 향상시키고, 대비.

공부를 게임같이 해 보자! 에 대한 연구

1. 배우는 것은 어렵다.
   - 익숙하지 않은 것일수록 더 어렵다
   - 컴퓨터는 배경지식이 많이 필요함으로 더 어렵다.
   - 와중에 창의성과 고도의 기술을 요구하는 보안은 더 어렵다.
2. 어려운 것을 게임을 즐기듯이 하자.
   - 본인의 업적에 따른 리워드, 아이템 등의 성취감을 통해 게임을 즐겁다고 여김.

CTF란?

- Capture The Flag
- 보안 공부를 게임처럼 하기 위함.
- 개인/팀 별로 문제를 풀어 flag를 구하여 인증을 통해 점수를 얻음.
- 가장 빨리 많은 문제를 푼 팀이 이긴다.
- 종류
  - 웹
    - 웹 서버의 취약점을 이용해서 권한 탈취, DB 유출 등.
  - 암호학
    - 수학적으로 이해가 되어야 하지만, 기존에 알려진 라이브러리, 기법 등을 활용해서 분석. 가장 수학적으로 접근.
  - 시스템
    - 특정 아키텍쳐 등에서 취약점을 찾음.
  - 포렌식
    - 파일 시스템, 메모리 덤프 등을 추적하여 어떤 경위를 통해 어떤 이벤트가 발생해서 어떤 결과를 가져왔는지.
  - 리버싱
    - 기계어를 사람이 이해할 수 있는 언어로 바꾸어 취약점을 분석.
  - 네트워크
    - 네트워크에서 오가는 패킷을 캡쳐해서 프로토콜 등을 분석하여 숨겨진 메세지를 찾음.
  - 미스크
    - 혼용되었거나 알고리즘에 가까운 것.
- JEOPARDY
  - 문제를 분야별로 분류하고 문제마다 점수를 나누고, 도출된 플래그를 서버에 인증. 가장 많이 사용.
  - 24~72시간 내리 달리는 경우.
  - 가장 많은 점수를 획득한 팀이 우승.
- ATTACK-DEFENSE
  - Real Time.
  - 각 팀이 똑같은 환경을 제공받고, 제공받은 환경에서의 취약점을 분석해 Payload를 박성해 상대팀을 공격하고, 우리팀이 공격받지 않게 방어.
  - OFFLINE으로 진행됨, 중간중간 쉬는시간 등을 가지고 몇일간 운영.
- HYBRID
  - ATTACK-DEFENSE + On-Going Chllange
  - 문제를 풀면 행위에 대한 점수가 나옴. 프로그래밍 챌린지와 흡사.
- WELL-Known
  - Plaid
  - DEFCON
  - Tokyo Westerns
  - Hack.Lu
  - OCTF
  - HITCON
  - CODEGATE
  - Google
- DEFCON CTF
  - 1300여개 팀 참여.
  - 보통 상위 20여 팀 선정하여 본선.
  - BLACK BADGES : 추후 DEFCON 무료 참가권
  - DEFCON이라는 해킹 컨퍼런스의 일부.
  - 1996년부터 진행함.
  - 운영진 마다의 특색. 보통 4~5년마다 바뀜
  - 예선
    - 유명한 대회 상위권을 추첨함.
    - 전년도 우승자도 초청함.
    - 올해 48시간 26문제
    - 1400+팀이 1문제씩은 풀었음.
    - https://socreboard2020.oooverflow.io
  - 규칙
    - 공방전 + 하이브리드
    - 35% 1 공격당 1점
    - 35% 1 방어 실패당 -1점
    - 30% KotH
  - 딥러닝 문제들 많이 나왔음.

CTF vs Real World

- 컴퓨터 기술은 이론 뿐만 아니라 손으로 해보는 것도 중요하다.
- 다양한 분야와 더미의 기술을 배우고 익힐 수 있다.
- 실제 사례를 기반으로 한 문제가 많기에 실무 능력을 간접적으로 향상시킨다.
- 팀워크 강화 및 경쟁을 통한 발전 가능성
- 브라우저 익스
  - 파폭,오페라,사파리 등
- 커널 익스
  - 우분투, 윈도우 등
- 프레임워크 익스
- 다양한 언어들을 사용한 문제들.

어떻게 시작할까?

- 워게임 : 상시 운영 중인 CTF
- 포너블.kr
- 웹해킹.kr 등
- www.dreamhack.io
  - 강의를 통해 배우고 나서 실제로 실습할 수 있는 환경 제공.
  - 질의응답 포럼.
  - 추후로도 무료 제공 예정.
  - 한국어 서비스!

---

### 취약점 분석을 통해 본 안전한 메신저 설계

#### 김형식 교수 (성균관대)

김형식 :

- 성균관 대학교 교수
- 영국에서 공부
- 작년까지 호주의 연구소에서 방문연구원 1년간 했음.

연구실에서 했던 여러가지 메신저에 관한 분석, 메신저들에서 공통적으로 발견된 취약점.

1. Enumeration attack
   - 2012년 쯔음부터 명명됨.
   - 전화번호를 이용해 사용자를 자동으로 추가하는 기능이 있음.
   - 이미 들어가 있는 기능으로, 기본적으로 켜져있고, 굉장히 편리한 기능이다.
   - 왜 문제인가?
     - 전화번호를 입력하고 일정 시간 이후 동기화를 통해 서버에 번호가 올라가고, 서버에서 해당 전화번호의 유저를 찾아서 친구로 척 하고 등록해줌.
     - 이 기능을 악용해서 타인의 개인정보를 수집할 가능성이 있음.
       - 아무 전화번호를 추가해서 정보 수집.
       - 사진, 이름, 전화번호 등.
     - 페북 등의 SNS에서도 악용될 수 있음.
     - 서비스 제공 측에서도 이를 알기 때문에, 공격자가 전화번호부에 등록한 이름으로 설정해준다. 하지만 추후 사용자의 이름을 지우거나 블로킹 등을 통해서 실제 이름을 가져올 수 있음.
     - 이를 통해 블로킹 등을 통해 실제 이름을 찾아 다시 등록하는 방법 등의 여러가지 방법.
     - 실제 101000개의 전화번호를 무작위 대입해본 결과, 약 50%의 확률로 정보를 습득함.
   - 어떻게 막을까?
     - 여러 번 접근 등을 제한함으로써 속도를 늦출 수 있을 것이다.
     - 페북의 경우, 이와 같은 행위를 하는 계정을 차단한다.
     - invitation-based
       - 상대방이 친구 요청을 수락해야 친구가 추가되는 방식.
   - 회사에 이를 보고하였음.
   - 하지만 이러한 분석과 리포트를 통해서 막는다고 하여도, 새로운 공격법이 발견됨.
2. 트래픽 분석
   - 패킷이 단순하고 빠르게 보내지는 경우, 사이드 채널 가로채기 등이 가능함.
   - 암호화된 메세지를 확인할 수는 없지만, 특정 행동 시 (채팅방 입/퇴장, 친구 프로필 확인, 메세지 송/수신 등) 에 나오는 패킷들의 트래픽을 관찰하면 암호화와 관계없이 사용자가 어떠한 행위를 하고 있는지 관찰이 가능함.
   - 패킷을 필터링하고 분석을 통해 99.7%의 정확도로 사용자가 어떠한 행위를 했는지 파악할 수 있었음.
3. 포렌식
   - 채팅방 하나하나가 별도의 DB로 작동.
   - DB의 path
   - DB 구조
   - 암호화 알고리즘
   - 암호화 인자
   - 사용자가 아님에도 키를 생성할 수 있는 환경 등이 사전에 필요
   - 암호화 방법 분석은 패킷을 뜯어보면 생각보다 쉬움.
   - 복잡해 보인다고 풀리지 않는 암호화가 아님.
   - 다른 부분에서 굉장한 신경을 써도, 하나의 취약점에 의해 정보는 털릴 수 있다.

다양한 메신저, 다양한 취약점.